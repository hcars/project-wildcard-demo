{% extends 'base.html' %}
{% block content %}
<div class="container-fluid">
    <h3>Add a Task:</h3>
    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
    <form action="{% url 'tasks:add_task' %}" method='post'>
    {% csrf_token %}
        <input type="hidden" value="{{ user.id }}" id="user" name="user">
        <div class="form-group">
            <label for="{{ form.task_name.name }}">Task Name</label>
            <input class="form-control" type="text" id="{{ form.task_name.name }}" name="{{ form.task_name.name }}">
        </div>
        <div class="form-group">
            <label for="{{ form.task_desc.name }}">Task Desc</label>
            <input class="form-control" type="text" id="{{ form.task_desc.name }}" name="{{ form.task_desc.name }}">
        </div>
        <div class="form-group">
            <label for="link">Link (Optional)</label>
            <input class="form-control" type="url" id="link" name="link" value="">
        </div>
        <div class="form-group">
            <label for="{{ form.due_date.name }}">Due Date</label>    
            <input class="form-control" type="datetime-local" id="{{ form.due_date.name }}" name="{{ form.due_date.name }}">
        </div>
        <div class="form-group">
            <label for="{{ form.length.name }}">Estimated Length</label>
            <input class="form-control" type="datetime-local" id="{{ form.length.name }}" name="{{ form.length.name }}">
        </div>
        <div class="form-group">
            <label for="category">Category</label>
            <select name="category" id="category" class="custom-select">
            {% for choice in form.category.choices %}
                <option value="{{ choice.0 }}">{{ choice.1 }}</option>
            {% endfor %}
            </select>

        </div>
        <button class="btn btn-primary" type="submit">
            Submit
        </button>
        <select class="custom-select" id="repeat" name="repeat">
            <option value="once">Add Task</option>
            <option value="weekly">Add Task Weekly</option>
            <option value="monthly">Add Task Monthly</option>
            <option value="annually">Add Task Annually</option>
        </select>
        Repeat <input type="number" min="0" value="0" name="times" id="times" required>times.</input>
        {% if form.errors %}
        {% for field in form %}
        {% for error in field.errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
        {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
        {% endfor %}
        {% endif %}
    </form>
</div>
{% endblock %}
